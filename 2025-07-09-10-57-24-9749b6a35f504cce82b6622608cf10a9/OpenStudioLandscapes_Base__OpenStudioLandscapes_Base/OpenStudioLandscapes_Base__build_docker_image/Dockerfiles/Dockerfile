
# AUTO-GENERATED by Dagster Asset OpenStudioLandscapes_Base__build_docker_image
# http://localhost:3000/asset-groups/OpenStudioLandscapes_Base%2Fbuild_docker_image
FROM ubuntu:20.04 AS openstudiolandscapes_base_build_docker_image
LABEL authors="michimussato@gmail.com"

ARG DEBIAN_FRONTEND=noninteractive

ENV CONTAINER_TIMEZONE=Europe/Zurich
ENV SET_CONTAINER_TIMEZONE=true

RUN apt-get update && apt-get upgrade -y

RUN apt-get install -y --no-install-recommends 'git' 'ca-certificates' 'htop' 'file' 'tzdata' 'curl' 'wget' 'ffmpeg' 'xvfb' 'libegl1' 'libsm6' 'libglu1-mesa' 'libxss1' 


RUN apt-get install -y --no-install-recommends 'build-essential' 'pkg-config' 'zlib1g-dev' 'libncurses5-dev' 'libgdbm-dev' 'libnss3-dev' 'libssl-dev' 'libreadline-dev' 'libffi-dev' 'libsqlite3-dev' 'libbz2-dev' 'iproute2' 'liblzma-dev' 


WORKDIR /build/python

RUN curl "https://www.python.org/ftp/python/3.11.11/Python-3.11.11.tgz" -o Python-3.11.11.tgz
RUN file Python-3.11.11.tgz
RUN tar -xvf Python-3.11.11.tgz

RUN cd Python-3.11.11 && ./configure --enable-optimizations  # Todo: --prefix  # https://stackoverflow.com/questions/11307465/destdir-and-prefix-of-make
RUN cd Python-3.11.11 && make -j $(nproc)
RUN cd Python-3.11.11 && make altinstall  # altinstall instead of install because the later command will overwrite the default system python3 binary.

RUN python3.11 -m pip install --upgrade pip setuptools setuptools_scm wheel


# RUN thinkbox-ssl-gen --help

RUN rm -rf /build/python

RUN apt-get clean

ENTRYPOINT []
